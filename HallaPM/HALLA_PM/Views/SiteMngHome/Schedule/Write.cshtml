@using HALLA_PM.Models;
@using HALLA_PM.Util;
@{
    ViewBag.Title = "Write";
    Layout = "~/Views/Shared/_LayoutSiteMng.cshtml";
    PlanSchedule maxYear = Model.maxYear;
    //maxYear
    Search search = ViewBag.Search;
}

<div id="container">

    <div class="location">
        <span class="home"><i class="fa fa-home"></i></span>
        <span>일정관리</span>
        <strong>등록일정계획</strong>
    </div>

    <form name="frmMain" id="frmMain" method="post">
        <input type="hidden" name="message" value="등록" />
        <input type="hidden" name="ApplyChk" value="N" />
        <input type="hidden" name="PageIndex" value="@(search.PageIndex)" />


        <div class="con_box search">
            <h3 class="mt0">등록일정계획 등록</h3>
            <div class="bg_gray">
                <i class="fa fa-info-circle" aria-hidden="true"></i> 설정된 기간 동안 등록 시스템이 오픈됩니다.<br />
                <i class="fa fa-info-circle" aria-hidden="true"></i> 실적등록기간이 초과되면 계획 및 실적 입력이 불가능합니다.
            </div>
        </div>
        <!--// con_box -->

        <div class="con_box">
            <table class="tbl th_ver ta_left">
                <caption></caption>
                <colgroup>
                    <col style="width:15%" />
                    <col style="width:15%" />
                    <col style="width:auto" />
                </colgroup>
                <tbody>
                    <tr>
                        <th scope="row">연도 선택</th>
                        <td colspan="2">
                            <div class="style_select" style="width:30%;">
                                <label>
                                    <span></span>
                                    <select name="ScheduleYear">
                                        @{
                                            for (int i = Convert.ToInt32(maxYear.ScheduleYear); i <= Convert.ToInt32(maxYear.ScheduleYear) + 10; i++)
                                            {
                                                <option value="@i">@i</option>
                                            }
                                        }
                                    </select>
                                </label>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <th scope="row">계획등록</th>
                        <td colspan="2">
                            <span class="datepicker">
                                <input type="text" class="start_date" name="PlanDtStart" style="width:30%;" />
                            </span> ~
                            <span class="datepicker">
                                <input type="text" class="end_date" name="PlanDtEnd" style="width:30%;" />
                            </span>
                        </td>
                    </tr>
                    <tr>
                        <th scope="row">실적등록</th>
                        <td class="ta_center">1월</td>
                        <td>
                            <input type="hidden" name="RegMonth" value="01" />
                            <span class="datepicker">
                                <input type="text" class="start_date" name="RegDtStart" style="width:30%;" />
                            </span> ~
                            <span class="datepicker">
                                <input type="text" class="end_date" name="RegDtEnd" style="width:30%;" />
                            </span>
                        </td>
                    </tr>
                    <tr>
                        <th scope="row">실적등록</th>
                        <td class="ta_center">2월</td>
                        <td>
                            <input type="hidden" name="RegMonth" value="02" />
                            <span class="datepicker">
                                <input type="text" class="start_date" name="RegDtStart" style="width:30%;" />
                            </span> ~
                            <span class="datepicker">
                                <input type="text" class="end_date" name="RegDtEnd" style="width:30%;" />
                            </span>
                        </td>
                    </tr>
                    <tr>
                        <th scope="row">실적등록</th>
                        <td class="ta_center">3월</td>
                        <td>
                            <input type="hidden" name="RegMonth" value="03" />
                            <span class="datepicker">
                                <input type="text" class="start_date" name="RegDtStart" style="width:30%;" />
                            </span> ~
                            <span class="datepicker">
                                <input type="text" class="end_date" name="RegDtEnd" style="width:30%;" />
                            </span>
                        </td>
                    </tr>
                    <tr>
                        <th scope="row">실적등록</th>
                        <td class="ta_center">4월</td>
                        <td>
                            <input type="hidden" name="RegMonth" value="04" />
                            <span class="datepicker">
                                <input type="text" class="start_date" name="RegDtStart" style="width:30%;" />
                            </span> ~
                            <span class="datepicker">
                                <input type="text" class="end_date" name="RegDtEnd" style="width:30%;" />
                            </span>
                        </td>
                    </tr>
                    <tr>
                        <th scope="row">실적등록</th>
                        <td class="ta_center">5월</td>
                        <td>
                            <input type="hidden" name="RegMonth" value="05" />
                            <span class="datepicker">
                                <input type="text" class="start_date" name="RegDtStart" style="width:30%;" />
                            </span> ~
                            <span class="datepicker">
                                <input type="text" class="end_date" name="RegDtEnd" style="width:30%;" />
                            </span>
                        </td>
                    </tr>
                    <tr>
                        <th scope="row">실적등록</th>
                        <td class="ta_center">6월</td>
                        <td>
                            <input type="hidden" name="RegMonth" value="06" />
                            <span class="datepicker">
                                <input type="text" class="start_date" name="RegDtStart" style="width:30%;" />
                            </span> ~
                            <span class="datepicker">
                                <input type="text" class="end_date" name="RegDtEnd" style="width:30%;" />
                            </span>
                        </td>
                    </tr>
                    <tr>
                        <th scope="row">실적등록</th>
                        <td class="ta_center">7월</td>
                        <td>
                            <input type="hidden" name="RegMonth" value="07" />
                            <span class="datepicker">
                                <input type="text" class="start_date" name="RegDtStart" style="width:30%;" />
                            </span> ~
                            <span class="datepicker">
                                <input type="text" class="end_date" name="RegDtEnd" style="width:30%;" />
                            </span>
                        </td>
                    </tr>
                    <tr>
                        <th scope="row">실적등록</th>
                        <td class="ta_center">8월</td>
                        <td>
                            <input type="hidden" name="RegMonth" value="08" />
                            <span class="datepicker">
                                <input type="text" class="start_date" name="RegDtStart" style="width:30%;" />
                            </span> ~
                            <span class="datepicker">
                                <input type="text" class="end_date" name="RegDtEnd" style="width:30%;" />
                            </span>
                        </td>
                    </tr>
                    <tr>
                        <th scope="row">실적등록</th>
                        <td class="ta_center">9월</td>
                        <td>
                            <input type="hidden" name="RegMonth" value="09" />
                            <span class="datepicker">
                                <input type="text" class="start_date" name="RegDtStart" style="width:30%;" />
                            </span> ~
                            <span class="datepicker">
                                <input type="text" class="end_date" name="RegDtEnd" style="width:30%;" />
                            </span>
                        </td>
                    </tr>
                    <tr>
                        <th scope="row">실적등록</th>
                        <td class="ta_center">10월</td>
                        <td>
                            <input type="hidden" name="RegMonth" value="10" />
                            <span class="datepicker">
                                <input type="text" class="start_date" name="RegDtStart" style="width:30%;" />
                            </span> ~
                            <span class="datepicker">
                                <input type="text" class="end_date" name="RegDtEnd" style="width:30%;" />
                            </span>
                        </td>
                    </tr>
                    <tr>
                        <th scope="row">실적등록</th>
                        <td class="ta_center">11월</td>
                        <td>
                            <input type="hidden" name="RegMonth" value="11" />
                            <span class="datepicker">
                                <input type="text" class="start_date" name="RegDtStart" style="width:30%;" />
                            </span> ~
                            <span class="datepicker">
                                <input type="text" class="end_date" name="RegDtEnd" style="width:30%;" />
                            </span>
                        </td>
                    </tr>
                    <tr>
                        <th scope="row">실적등록</th>
                        <td class="ta_center">12월</td>
                        <td>
                            <input type="hidden" name="RegMonth" value="12" />
                            <span class="datepicker">
                                <input type="text" class="start_date" name="RegDtStart" style="width:30%;" />
                            </span> ~
                            <span class="datepicker">
                                <input type="text" class="end_date" name="RegDtEnd" style="width:30%;" />
                            </span>
                        </td>
                    </tr>
                </tbody>
            </table>
            <div class="btn_area2">
                <div class="left">
                    <button class="btn full_blue" type="button" type="button" onclick="onList();">목록</button>
                </div>
                <div class="right">
                    <button class="btn full_green" type="button" type="button" onclick="onWrite();">저장</button>
                </div>
            </div>
        </div>
        <!--// con_box -->
    </form>
</div>
<script type="text/javascript">
    $(function () {
        // datepicker
        MYAPP.form.datePicker(".start_date");
        MYAPP.form.datePicker(".end_date");

        // datepickerTime
        //MYAPP.form.datePickerTime(".start_date");

        $("#frmMain").validate({
            rules: {
                ScheduleYear: {
                    required: true,
                },
                PlanDtStart: {
                    required: true,
                },
                PlanDtEnd: {
                    required: true,
                },
                /*
                RegDtStart: {
                    required: true,
                },
                RegDtEnd: {
                    required: true,
                },
                */
            },
            messages: {
                ScheduleYear: {
                    required: "연도를 선택하세요.",
                },
                PlanDtStart: {
                    required: "계획등록 시작일을 선택하세요.",
                },
                PlanDtEnd: {
                    required: "계획등록 종료일을 선택하세요.",
                },
                /*
                RegDtStart: {
                    required: "실적등록 시작일을 선택하세요.",
                },
                RegDtEnd: {
                    required: "실적등록 종료일을 선택하세요.",
                },
                */
            }, errorPlacement: function (error, element) {
                // do nothing
                alert("errorPlacement");
            },
            invalidHandler: function (form, validator) {
                var errors = validator.numberOfInvalids();
                if (errors) {
                    alert(validator.errorList[0].message);
                    validator.errorList[0].element.focus();
                }
                alert("invalidHandler");
            }
        });
    });

    function onWrite() {
        var f = document.frmMain;

        if ($(f).valid()) {

            if (!onCheckMultipleNameBlankValues("RegDtStart", "실적등록 시작일을 선택하세요.")) return false;
            if (!onCheckMultipleNameBlankValues("RegDtEnd", "실적등록 종료일을 선택하세요.")) return false;

            if (confirm("등록하시겠습니까?")) {
                f.action = "Write_Action";
                f.submit();
            }
        }
    }

    function onList() {
        var f = document.frmMain;
        f.action = "List";
        f.submit();
    }
</script>
