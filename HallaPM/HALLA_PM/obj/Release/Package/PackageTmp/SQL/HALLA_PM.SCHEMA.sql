
/*
	제목 : 한라그룹 실적 관리시스템 테이블 스키마
	작성 : 2018.07.20 - 
	내용 : 시스템에 필요한 스키마 및 기초 데이터를 설정해둡니다.

	2018.08.01 스키마 중간 점검
	2018.08.07 스키마 변경 체크(계획대비 등의 값을 모두 저장을 꼭 해야하는 것인지)
	2018.08.16 개발서버에 테이블 스키마 모두 반영

	점검 요청 사항 : 테이블 스키마가 변경되면 여기 스키마에 변경 된 사항을 넣어준다.
*/

/*
	관리자 관리 관련 디비 테이블
*/

-- 관리자관리 > 접속로그
CREATE TABLE ADMIN_ACCESS_LOG
(
	ACCESS_DATE				DATETIME NOT NULL,			-- 접속일
	USER_KEY				VARCHAR(11) NOT NULL,		-- 사원키
	EMP_NO					VARCHAR(16) NOT NULL,		-- 사원번호
	USER_KOR_NAME			NVARCHAR(64) NULL,			-- 사원명
	IP						VARCHAR(64) NULL,			-- 아이피
	MEMO					NVARCHAR(256) NULL,			-- 메모
	DESCRITION				NVARCHAR(1024) NULL,		-- 설명
	PRIMARY KEY( ACCESS_DATE, USER_KEY)
);

-- 관리자관리 > 관리자 권한관리
CREATE TABLE ADMIN_AUTH
(
	AUTH_USER_KEY			VARCHAR(11) NOT NULL PRIMARY KEY,	-- 권한가진 사원키
	AUTH_EMP_NO				VARCHAR(16) NOT NULL,				-- 권한가진 사원번호
	AUTH_USER_KOR_NAME		NVARCHAR(64) NULL,					-- 권한가진 사원명
	AUTH_LEVEL				INT NOT NULL,						-- 권한 레벨
	IS_USE					CHAR(1) NULL DEFAULT(N'Y'),			-- 사용여부

	USER_KEY				VARCHAR(11) NOT NULL,
	EMP_NO					VARCHAR(16) NULL,
	CREATE_DATE				DATETIME NULL
);

-- 관리자관리 > 관리자 권한관리 - 조직권한(개발)
CREATE TABLE ADMIN_ORG_AUTH
(
	AUTH_USER_KEY			VARCHAR(11) NOT NULL,
	ORG_COMPANY_SEQ			INT NOT NULL,
	PRIMARY KEY (AUTH_USER_KEY, ORG_COMPANY_SEQ)
);

/*
	경영실적 관리
*/
CREATE TABLE BUSINESS_PERFORMANCE
(
	SEQ						INT NOT NULL IDENTITY(1, 1) PRIMARY KEY,
	USER_KEY				VARCHAR(11) NOT NULL,
	EMP_NO					VARCHAR(16) NULL,

	REG_DATE				DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
	UPDATE_DATE				DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,

	TITLE					NVARCHAR(256) NOT NULL,

	YEAR					NVARCHAR(4) NOT NULL,
	MONTH					NVARCHAR(2) NOT NULL,

	BUSINESS_TYPE			INT NOT NULL,

	IS_USE					NVARCHAR(1) NOT NULL DEFAULT 'N',
);

-- 관리자관리 > 조직관리 - 부문정보
CREATE TABLE ORG_UNION
(
	SEQ						INT NOT NULL IDENTITY(1, 1) PRIMARY KEY,
	UNION_NAME				NVARCHAR(64) NOT NULL,
	IS_USE					CHAR(1) NULL DEFAULT(N'Y'),
	ORD						INT NULL,

	USER_KEY				VARCHAR(11) NOT NULL,
	EMP_NO					VARCHAR(16) NULL,
	CREATE_DATE				DATETIME NULL
);

-- 관리자관리 > 조직관리 - 회사정보
CREATE TABLE ORG_COMPANY
(
	ORG_UNION_SEQ			INT NOT NULL,
	SEQ						INT NOT NULL IDENTITY(1, 1) PRIMARY KEY,
	COMPANY_NAME			NVARCHAR(64) NOT NULL,
	IS_USE					CHAR(1) NULL DEFAULT(N'Y'),
	ORD						INT NULL,

	USER_KEY				VARCHAR(11) NOT NULL,
	EMP_NO					VARCHAR(16) NULL,
	CREATE_DATE				DATETIME NULL
);

-- 관리자관리 > 조직관리 - Buniess Unit 정보
CREATE TABLE ORG_BUSINESS
(
	ORG_COMPANY_SEQ			INT NOT NULL,
	SEQ						INT NOT NULL IDENTITY(1, 1) PRIMARY KEY,
	BUSINESS_NAME			NVARCHAR(64) NOT NULL,
	IS_USE					CHAR(1) NULL DEFAULT(N'Y'),
	ORD						INT NULL,

	USER_KEY				VARCHAR(11) NOT NULL,
	EMP_NO					VARCHAR(16) NULL,
	CREATE_DATE				DATETIME NULL
);

-- 관리자관리 > 보고시스템 권한관리
CREATE TABLE SYSTEM_AUTH
(
	AUTH_USER_KEY			VARCHAR(11) NOT NULL PRIMARY KEY,
	AUTH_EMP_NO				VARCHAR(16) NOT NULL,
	AUTH_USER_KOR_NAME		NVARCHAR(64) NULL,
	IS_USE					CHAR(1) NULL DEFAULT(N'Y'),

	USER_KEY				VARCHAR(11) NOT NULL,
	EMP_NO					VARCHAR(16) NULL,
	CREATE_DATE				DATETIME NULL
);
-- 관리자권한 > 보고시스템 권한관리 - 조직권한
CREATE TABLE SYSTEM_ORG_AUTH
(
	AUTH_USER_KEY			VARCHAR(11) NOT NULL,
	ORG_COMPANY_SEQ			INT NOT NULL,
	PRIMARY KEY (AUTH_USER_KEY, ORG_COMPANY_SEQ)
);
-- 관리자권한 > 보고시스템 권한관리 - 메뉴권한
CREATE TABLE SYSTEM_MENU_AUTH
(
	AUTH_USER_KEY			VARCHAR(11) NOT NULL,
	MENU_TYPE				INT NOT NULL,
	PRIMARY KEY (AUTH_USER_KEY, MENU_TYPE)
);

/*
	일정 관리 관련 디비 테이블
*/

-- 일정관리 > 등록일정계획 : APPLY_CHK : 승인요청 상태 [Y - 승인요청, N - 미승인]
-- 설명 : APPLY_CHK가 Y가 되면 더 이상 계획일정은 수정이 안되는 것인지?(개발)
CREATE TABLE PLAN_SCHEDULE
(
	SCHEDULE_YEAR		VARCHAR(4) NOT NULL PRIMARY KEY,
	PLAN_DT_START		VARCHAR(10) NOT NULL,						-- 계획등록 시작일
	PLAN_DT_END			VARCHAR(10) NOT NULL,						-- 계획등록 종료일
	APPLY_CHK			CHAR(1) NOT NULL DEFAULT(N'N'),		-- 승인요청 상태

	USER_KEY			VARCHAR(11) NOT NULL,
	EMP_NO				VARCHAR(16) NULL,
	CREATE_DATE			DATETIME NULL
);
-- 일정관리 > 등록일정계획 - 실적등록(개발)
CREATE TABLE PLAN_SCHEDULE_PERFORMANCE_REG
(
	SCHEDULE_YEAR		VARCHAR(4) NOT NULL,
	REG_MONTH			CHAR(2) NOT NULL,

	REG_DT_START		VARCHAR(10) NOT NULL,
	REG_DT_END			VARCHAR(10) NOT NULL,

	PRIMARY KEY (SCHEDULE_YEAR, REG_MONTH)
);

/*
	사업계획 관련 디비 테이블
*/

-- 사업계획 > 손익월별계획
CREATE TABLE PLAN_MONTHLY_PAL
(
	SEQ					INT NOT NULL IDENTITY(1, 1) PRIMARY KEY,
	MONTHLY_PAL_YEAR	VARCHAR(4) NOT NULL,
	ORG_COMPANY_SEQ		INT NOT NULL,

	REGIST_STATUS		INT NOT NULL DEFAULT(0),

	USER_KEY			VARCHAR(11) NOT NULL,
	EMP_NO				VARCHAR(16) NULL,
	CREATE_DATE			DATETIME NULL
);

-- 사업계획 > 손익월별계획 - 부서데이터
CREATE TABLE PLAN_MONTHLY_PAL_BUSINESS
(
	PLAN_MONTHLY_PAL_SEQ	INT NOT NULL,
	SEQ						INT NOT NULL IDENTITY(1, 1),
		
	ORG_BUSINESS_SEQ		INT NULL,
	MONTHLY					VARCHAR(4) NULL,

	SALES					DECIMAL(12, 2) NOT NULL,
	EBIT					DECIMAL(12, 2) NOT NULL,
	EBIT_RATE				DECIMAL(12, 2) NULL,
	PBT						DECIMAL(12, 2) NOT NULL,

	PRIMARY KEY ( PLAN_MONTHLY_PAL_SEQ, SEQ)
);

-- 사업계획 > 손익월별계획 -  부서(월) 합계 : MONTHLY 99 이면 합계
CREATE TABLE PLAN_MONTHLY_PAL_BUSINESS_MONTHLY_SUM
(
	PLAN_MONTHLY_PAL_SEQ	INT NOT NULL,
	SEQ						INT NOT NULL IDENTITY(1, 1),

	MONTHLY					VARCHAR(4) NULL,

	SALES					DECIMAL(12, 2) NOT NULL,
	EBIT					DECIMAL(12, 2) NOT NULL,
	EBIT_RATE				DECIMAL(12, 2) NULL,
	PBT						DECIMAL(12, 2) NOT NULL,

	PRIMARY KEY ( PLAN_MONTHLY_PAL_SEQ, SEQ)
);

-- 사업계획 > 손익월별계획 - 부서(분기) 합계 : BUSINESS_QUARTER 99 이면 합계
CREATE TABLE PLAN_MONTHLY_PAL_BUSINESS_QUARTER_SUM
(
	PLAN_MONTHLY_PAL_SEQ	INT NOT NULL,
	SEQ						INT NOT NULL IDENTITY(1, 1),

	BUSINESS_QUARTER		INT NULL,

	SALES					DECIMAL(12, 2) NOT NULL,
	EBIT					DECIMAL(12, 2) NOT NULL,
	EBIT_RATE				DECIMAL(12, 2) NULL,
	PBT						DECIMAL(12, 2) NOT NULL,

	PRIMARY KEY ( PLAN_MONTHLY_PAL_SEQ, SEQ)
);

-- 사업계획 > 손익중기계획
CREATE TABLE PLAN_YEAR_PAL
(
	SEQ					INT NOT NULL IDENTITY(1, 1) PRIMARY KEY,

	YEAR_PAL_YEAR		VARCHAR(4) NOT NULL,
	ORG_COMPANY_SEQ		INT NOT NULL,
	REGIST_STATUS		INT NOT NULL DEFAULT(0),

	USER_KEY			VARCHAR(11) NOT NULL,
	EMP_NO				VARCHAR(16) NULL,
	CREATE_DATE			DATETIME NULL

);

-- 사업계획 > 손익중기계획 - 부서별 데이터
CREATE TABLE PLAN_YEAR_PAL_BUSINESS
(
	PLAN_YEAR_PAL_SEQ		INT NOT NULL,
	SEQ						INT NOT NULL IDENTITY(1, 1),

	ORG_BUSINESS_SEQ		INT NOT NULL,
	YEARLY_YEAR				VARCHAR(4) NOT NULL,

	SALES					DECIMAL(12, 2) NOT NULL,
	EBIT					DECIMAL(12, 2) NOT NULL,
	EBIT_RATE				DECIMAL(12, 2) NULL,
	PBT						DECIMAL(12, 2) NOT NULL,
	PRIMARY KEY ( PLAN_YEAR_PAL_SEQ, SEQ)
);

-- 사업계획 > 손익중기계획 - 손익 요약
CREATE TABLE PLAN_YEAR_PAL_BUSINESS_SUMMARY
(
	PLAN_YEAR_PAL_SEQ	INT NOT NULL,
	SEQ						INT NOT NULL IDENTITY(1, 1),

	YEARLY_YEAR				VARCHAR(4) NOT NULL,

	SALES					DECIMAL(12, 2) NOT NULL,
	EBIT					DECIMAL(12, 2) NOT NULL,
	EBIT_RATE				DECIMAL(12, 2) NULL,
	PBT						DECIMAL(12, 2) NOT NULL,
	PRIMARY KEY ( PLAN_YEAR_PAL_SEQ, SEQ)
);


-- 사업계획 > 중기BS
CREATE TABLE PLAN_YEAR_BS
(
	SEQ					INT NOT NULL IDENTITY(1, 1) PRIMARY KEY,

	YEAR_BS_YEAR		VARCHAR(4) NOT NULL,
	ORG_COMPANY_SEQ		INT NOT NULL,
	REGIST_STATUS		INT NOT NULL DEFAULT(0),

	USER_KEY			VARCHAR(11) NOT NULL,
	EMP_NO				VARCHAR(16) NULL,
	CREATE_DATE			DATETIME NULL
);

-- 사업계획 > 중기BS - B/SHEET
CREATE TABLE PLAN_YEAR_BS_BSHEET
(
	PLAN_YEAR_BS_SEQ		INT NOT NULL,
	SEQ						INT NOT NULL IDENTITY(1, 1),

	YEARLY_YEAR				VARCHAR(4) NOT NULL,
	MONTHLY					VARCHAR(4) NULL,

	ASSETS					DECIMAL(12, 2) NOT NULL,	-- 자산
	CURRENT_ASSETS			DECIMAL(12, 2) NOT NULL,	-- 유동 자산
	LIABILITIES				DECIMAL(12, 2) NOT NULL,	-- 부채
	CURRENT_LIABILITIES		DECIMAL(12, 2) NOT NULL,	-- 유동 부채
	CAPITAL					DECIMAL(12, 2) NOT NULL,	-- 자본
	CASH					DECIMAL(12, 2) NOT NULL,	-- 현금
	LOAN					DECIMAL(12, 2) NOT NULL,	-- 차입금
	LIABILITIES_RATE		DECIMAL(12, 2) NULL,		-- 부채 비율
	CURRENT_RATE			DECIMAL(12, 2) NULL			-- 유동 비율

	PRIMARY KEY (PLAN_YEAR_BS_SEQ, SEQ)
);

-- 사업계획 > 중기BS - ROIC
CREATE TABLE PLAN_YEAR_BS_ROIC
(
	PLAN_YEAR_BS_SEQ		INT NOT NULL,
	SEQ						INT NOT NULL IDENTITY(1, 1),

	YEARLY_YEAR				VARCHAR(4) NOT NULL,
	MONTHLY					VARCHAR(4) NULL,
	
	AFTER_TAX_OPERATION_PROFIT	DECIMAL(12, 2) NOT NULL,	-- 세후 영업 이익
	PAIN_IN_CAPITAL				DECIMAL(12, 2) NOT NULL,	-- 투하 자본
	ROIC						DECIMAL(12, 2) NULL			-- ROIC

	PRIMARY KEY(PLAN_YEAR_BS_SEQ, SEQ)
);

-- 사업계획 > 중기BS - W/CAPITAL
CREATE TABLE PLAN_YEAR_BS_W_CAPITAL
(
	PLAN_YEAR_BS_SEQ		INT NOT NULL,
	SEQ						INT NOT NULL IDENTITY(1, 1),

	YEARLY_YEAR				VARCHAR(4) NOT NULL,
	ANNUAL_SALES			DECIMAL(12, 2) NOT NULL,	-- 연간 매출액
	ANNUAL_SALES_COST		DECIMAL(12, 2) NOT NULL,	-- 연간 매출 원가
	INVENTORY_COST			DECIMAL(12, 2) NULL, -- 투자원가(2018.11.06 추가. INVENTORY와 계산하여 INVENTORY_TO_DAYS를 만든다.

	PRIMARY KEY(PLAN_YEAR_BS_SEQ, SEQ)
);

-- 사업계획 > 중기BS - W/CAPITAL 값으로 연산
CREATE TABLE PLAN_YEAR_BS_W_CAPITAL_REG
(
	PLAN_YEAR_BS_SEQ		INT NOT NULL,
	SEQ						INT NOT NULL IDENTITY(1, 1),

	YEARLY_YEAR				VARCHAR(4) NOT NULL,
	MONTHLY					VARCHAR(4) NULL,

	AR						DECIMAL(12, 2) NOT NULL,
	AR_TO_DAYS				DECIMAL(12, 2) NULL,
	AP						DECIMAL(12, 2) NOT NULL,
	AP_TO_DAYS				DECIMAL(12, 2) NULL,
	INVENTORY				DECIMAL(12, 2) NOT NULL,
	INVENTORY_TO_DAYS		DECIMAL(12, 2) NULL

	PRIMARY KEY(PLAN_YEAR_BS_SEQ, SEQ)
);

-- 사업계획 > 중기BS - 요약
CREATE TABLE PLAN_YEAR_BS_SUMMARY
(
	PLAN_YEAR_BS_SEQ		INT NOT NULL,
	SEQ						INT NOT NULL IDENTITY(1, 1),

	--YEARLY					VARCHAR(4) NOT NULL,		-- 2018/08/29 YEARLY_YEAR 하나로 가능하여 YEARLY 제거
	YEARLY_YEAR				VARCHAR(4) NOT NULL,

	ASSETS					DECIMAL(12, 2) NOT NULL,		-- 자산
	CURRENT_ASSETS			DECIMAL(12, 2) NULL,	-- 유동 자산(2018.09.14)
	LIABILITIES				DECIMAL(12, 2) NOT NULL,		-- 부채
	CURRENT_LIABILITIES		DECIMAL(12, 2) NULL,	-- 유동 부채(2018.09.14)
	CAPITAL					DECIMAL(12, 2) NOT NULL,		-- 자본
	CASH					DECIMAL(12, 2) NOT NULL,		-- 현금
	LOAN					DECIMAL(12, 2) NOT NULL,		-- 차입금
	LIABILITIES_RATE		DECIMAL(12, 2) NOT NULL,		-- 부채 비율
	
	AFTER_TAX_OPERATION_PROFIT	DECIMAL(12, 2) NOT NULL,	-- 세후 영업 이익
	PAIN_IN_CAPITAL				DECIMAL(12, 2) NOT NULL,	-- 투하 자본
	ROIC						DECIMAL(12, 2) NOT NULL,	-- ROIC

	AR						DECIMAL(12, 2) NOT NULL,
	AR_TO_DAYS				DECIMAL(12, 2) NOT NULL,
	AP						DECIMAL(12, 2) NOT NULL,
	AP_TO_DAYS				DECIMAL(12, 2) NOT NULL,
	INVENTORY				DECIMAL(12, 2) NOT NULL,
	INVENTORY_TO_DAYS		DECIMAL(12, 2) NOT NULL

	PRIMARY KEY(PLAN_YEAR_BS_SEQ, SEQ)
);

/*
	사업계획 중기BS 예외 테이블. (주)한라
*/
CREATE TABLE PLAN_YEAR_BS_EX
(	
	SEQ							INT NOT NULL IDENTITY(1, 1) PRIMARY KEY,

	YEAR_BS_YEAR				VARCHAR(4) NOT NULL,
	ORG_COMPANY_SEQ				INT NOT NULL,
	REGIST_STATUS				INT NOT NULL DEFAULT(0),

	USER_KEY					VARCHAR(11) NOT NULL,
	EMP_NO						VARCHAR(16) NULL,
	CREATE_DATE					DATETIME NULL
);

CREATE TABLE PLAN_YEAR_BS_BSHEET_EX
(
	PLAN_YEAR_BS_SEQ			INT NOT NULL,
	SEQ							INT NOT NULL IDENTITY(1, 1),

	YEARLY_YEAR					VARCHAR(4) NOT NULL,
	MONTHLY						VARCHAR(4) NULL,

	ASSETS						DECIMAL(12, 2) NOT NULL,	-- 자산
	CURRENT_ASSETS				DECIMAL(12, 2) NOT NULL,	-- 유동 자산
	LIABILITIES					DECIMAL(12, 2) NOT NULL,	-- 부채
	CURRENT_LIABILITIES			DECIMAL(12, 2) NOT NULL,	-- 유동 부채
	CAPITAL						DECIMAL(12, 2) NOT NULL,	-- 자본
	CASH						DECIMAL(12, 2) NOT NULL,	-- 현금
	LOAN						DECIMAL(12, 2) NOT NULL,	-- 차입금
	LIABILITIES_RATE			DECIMAL(12, 2) NULL,		-- 부채 비율
	CURRENT_RATE				DECIMAL(12, 2) NULL			-- 유동 비율

	PRIMARY KEY (PLAN_YEAR_BS_SEQ, SEQ)
)

CREATE TABLE PLAN_YEAR_BS_ROIC_EX
(
	PLAN_YEAR_BS_SEQ			INT NOT NULL,
	SEQ							INT NOT NULL IDENTITY(1, 1),

	YEARLY_YEAR					VARCHAR(4) NOT NULL,
	MONTHLY						VARCHAR(4) NULL,
	
	AFTER_TAX_OPERATION_PROFIT	DECIMAL(12, 2) NOT NULL,	-- 세후 영업 이익
	PAIN_IN_CAPITAL				DECIMAL(12, 2) NOT NULL,	-- 투하 자본
	ROIC						DECIMAL(12, 2) NULL			-- ROIC

	PRIMARY KEY(PLAN_YEAR_BS_SEQ, SEQ)
);

CREATE TABLE PLAN_YEAR_BS_W_CAPITAL_EX
(
	PLAN_YEAR_BS_SEQ			INT NOT NULL,
	SEQ							INT NOT NULL IDENTITY(1, 1),

	YEARLY_YEAR					VARCHAR(4) NOT NULL,
	ANNUAL_SALES				DECIMAL(12, 2) NOT NULL,	-- 연간 매출액
	ANNUAL_SALES_COST			DECIMAL(12, 2) NOT NULL,	-- 연간 매출 원가
	INVENTORY_COST			DECIMAL(12, 2) NULL, -- 투자원가(2018.11.06 추가. INVENTORY와 계산하여 INVENTORY_TO_DAYS를 만든다.

	PRIMARY KEY(PLAN_YEAR_BS_SEQ, SEQ)
);

CREATE TABLE PLAN_YEAR_BS_W_CAPITAL_REG_EX
(
	PLAN_YEAR_BS_SEQ			INT NOT NULL,
	SEQ							INT NOT NULL IDENTITY(1, 1),

	YEARLY_YEAR					VARCHAR(4) NOT NULL,
	MONTHLY						VARCHAR(4) NULL,

	AR							DECIMAL(12, 2) NOT NULL,
	AR_TO_DAYS					DECIMAL(12, 2) NULL,
	AP							DECIMAL(12, 2) NOT NULL,
	AP_TO_DAYS					DECIMAL(12, 2) NULL,
	INVENTORY					DECIMAL(12, 2) NOT NULL,
	INVENTORY_TO_DAYS			DECIMAL(12, 2) NULL

	PRIMARY KEY(PLAN_YEAR_BS_SEQ, SEQ)
);

CREATE TABLE PLAN_YEAR_BS_SUMMARY_EX
(
	PLAN_YEAR_BS_SEQ			INT NOT NULL,
	SEQ							INT NOT NULL IDENTITY(1, 1),

	--YEARLY						VARCHAR(4) NOT NULL,		-- 2018/08/29 YEARLY_YEAR 하나로 가능하여 YEARLY 제거
	YEARLY_YEAR					VARCHAR(4) NOT NULL,

	ASSETS						DECIMAL(12, 2) NOT NULL,		-- 자산
	CURRENT_ASSETS				DECIMAL(12, 2) NOT NULL,	-- 유동 자산(2018.09.14)
	LIABILITIES					DECIMAL(12, 2) NOT NULL,		-- 부채
	CURRENT_LIABILITIES			DECIMAL(12, 2) NOT NULL,	-- 유동 부채(2018.09.14)
	CAPITAL						DECIMAL(12, 2) NOT NULL,		-- 자본
	CASH						DECIMAL(12, 2) NOT NULL,		-- 현금
	LOAN						DECIMAL(12, 2) NOT NULL,		-- 차입금
	LIABILITIES_RATE			DECIMAL(12, 2) NOT NULL,		-- 부채 비율
	
	AFTER_TAX_OPERATION_PROFIT	DECIMAL(12, 2) NOT NULL,	-- 세후 영업 이익
	PAIN_IN_CAPITAL				DECIMAL(12, 2) NOT NULL,	-- 투하 자본
	ROIC						DECIMAL(12, 2) NOT NULL,	-- ROIC

	AR							DECIMAL(12, 2) NOT NULL,
	AR_TO_DAYS					DECIMAL(12, 2) NOT NULL,
	AP							DECIMAL(12, 2) NOT NULL,
	AP_TO_DAYS					DECIMAL(12, 2) NOT NULL,
	INVENTORY					DECIMAL(12, 2) NOT NULL,
	INVENTORY_TO_DAYS			DECIMAL(12, 2) NOT NULL

	PRIMARY KEY(PLAN_YEAR_BS_SEQ, SEQ)
);
/*
	사업계획 중기BS 예외 처리 끝
*/

-- 사업계획 > 중기CF
CREATE TABLE PLAN_YEAR_CF
(
	SEQ					INT NOT NULL IDENTITY(1, 1) PRIMARY KEY,

	YEAR_CF_YEAR		VARCHAR(4) NOT NULL,
	ORG_COMPANY_SEQ		INT NOT NULL,
	REGIST_STATUS		INT NOT NULL DEFAULT(0),

	USER_KEY			VARCHAR(11) NOT NULL,
	EMP_NO				VARCHAR(16) NULL,
	CREATE_DATE			DATETIME NULL
);

-- 사업계획 > 중기CF - 영업활동
CREATE TABLE PLAN_YEAR_CF_SALES
(
	PLAN_YEAR_CF_SEQ		INT NOT NULL,
	SEQ						INT NOT NULL IDENTITY(1, 1),

	YEARLY_YEAR				VARCHAR(4) NOT NULL,
	MONTHLY					VARCHAR(4) NULL,

	OPERATION_PROFIT		DECIMAL(12, 2) NOT NULL,	-- 영업 이익
	DEPRECIATION_COST		DECIMAL(12, 2) NOT NULL,	-- 감가비
	CORP_TAX				DECIMAL(12, 2) NOT NULL,	-- 법인세 비율
	EBITDA					DECIMAL(12, 2) NULL,		-- 세후 EBITDA
	AR						DECIMAL(12, 2) NOT NULL,	-- AR 변동
	INV						DECIMAL(12, 2) NOT NULL,	-- INV 변동
	AP						DECIMAL(12, 2) NOT NULL,	-- AP 변동
	WC_SUM					DECIMAL(12, 2) NULL,		-- WC 변동 소계
	ETC						DECIMAL(12, 2) NOT NULL,	-- 기타
	INTEREST_EXPENSE		DECIMAL(12, 2) NOT NULL,	-- 이자 비용
	INTEREST_INCOME			DECIMAL(12, 2) NOT NULL,	-- 이자 수익
	FINANCIAL_COST_SUM		DECIMAL(12, 2) NULL			-- 금융 비용 소계

	PRIMARY KEY(PLAN_YEAR_CF_SEQ, SEQ)
);

-- 사업계획 > 중기CF - 투자활동
CREATE TABLE PLAN_YEAR_CF_INVESTMENT
(
	PLAN_YEAR_CF_SEQ		INT NOT NULL,
	SEQ						INT NOT NULL IDENTITY(1, 1),

	YEARLY_YEAR				VARCHAR(4) NOT NULL,
	MONTHLY					VARCHAR(4) NULL,

	ASSETS					DECIMAL(12, 2) NOT NULL,	-- 유무형 자산
	EQUITY_INVESTMENT		DECIMAL(12, 2) NOT NULL,	-- 지분 투자
	ASSETS_SALE				DECIMAL(12, 2) NOT NULL,	-- 자산 매각
	ETC						DECIMAL(12, 2) NOT NULL,	-- 기타
	NET_CAPEX_SUM			DECIMAL(12, 2) NULL,		-- NET CAPEX 소계

	PRIMARY KEY(PLAN_YEAR_CF_SEQ, SEQ)
);

-- 사업계획 > 중기CF - 재무활동
CREATE TABLE PLAN_YEAR_CF_FINANCIAL
(
	PLAN_YEAR_CF_SEQ		INT NOT NULL,
	SEQ						INT NOT NULL IDENTITY(1, 1),

	YEARLY_YEAR				VARCHAR(4) NOT NULL,
	MONTHLY					VARCHAR(4) NULL,

	ALLOCATION				DECIMAL(12, 2) NOT NULL,	-- 배당
	INCREASE				DECIMAL(12, 2) NOT NULL,	-- 증자
	BORROWING				DECIMAL(12, 2) NOT NULL,	-- 차입
	REPAYMENT				DECIMAL(12, 2) NOT NULL,	-- 상환
	ETC						DECIMAL(12, 2) NOT NULL,	-- 기타
	FINANCIAL_SUM			DECIMAL(12, 2) NULL,		-- 재무 활동 소계

	PRIMARY KEY(PLAN_YEAR_CF_SEQ, SEQ)
);

-- 사업계획 > 중기CF - FCF
CREATE TABLE PLAN_YEAR_CF_FCF
(
	PLAN_YEAR_CF_SEQ		INT NOT NULL,
	SEQ						INT NOT NULL IDENTITY(1, 1),

	YEARLY_YEAR				VARCHAR(4) NOT NULL,
	MONTHLY					VARCHAR(4) NULL,

	FCF1					DECIMAL(12, 2) NULL,	-- FCF1
	FCF2					DECIMAL(12, 2) NULL,	-- FCF2
	FCF3					DECIMAL(12, 2) NULL,	-- FCF3
	CASH_SUM				DECIMAL(12, 2) NULL,	-- 현금 흐름 합계
	SALES					DECIMAL(12, 2) NULL,	-- SALES
	FCF_SALES				DECIMAL(12, 2) NULL		-- FCF / SALES

	PRIMARY KEY(PLAN_YEAR_CF_SEQ, SEQ)
);

-- 사업계획 > 중기CF - 기초/기말현금
CREATE TABLE PLAN_YEAR_CF_BE_CASH
(
	PLAN_YEAR_CF_SEQ		INT NOT NULL,
	SEQ						INT NOT NULL IDENTITY(1, 1),

	YEARLY_YEAR				VARCHAR(4) NOT NULL,
	MONTHLY					VARCHAR(4) NULL,

	BASIC_CASH				DECIMAL(12, 2) NULL,		-- 기초 현금
	ENDING_CASH				DECIMAL(12, 2) NULL,		-- ENDING CASH
	CREDIT_LINE				DECIMAL(12, 2) NOT NULL,	-- CREDIT LINE
	AVAILABLE_CASH			DECIMAL(12, 2) NULL			-- 가용 현금

	PRIMARY KEY(PLAN_YEAR_CF_SEQ, SEQ)
);

-- 사업계획 > 중기CF - 요약
CREATE TABLE PLAN_YEAR_CF_SUMMARY
(
	PLAN_YEAR_CF_SEQ		INT NOT NULL,
	SEQ						INT NOT NULL IDENTITY(1, 1),
	
	YEARLY					VARCHAR(4) NULL, -- 2018.09.28 전년대비가 생겨서 추가
	YEARLY_YEAR				VARCHAR(4) NOT NULL,
	--MONTHLY					VARCHAR(4) NULL, -- 2018.09.03 월없음
	
	CF_SALES				DECIMAL(12, 2) NOT NULL,	-- 영업 활동
	CF_INVESTMENT			DECIMAL(12, 2) NOT NULL,	-- 투자 활동
	CF_FINANCIAL			DECIMAL(12, 2) NOT NULL,	-- 재무 활동
	CF_SUM					DECIMAL(12, 2) NULL,		-- CF 합계
	CF_ENDING_CASH			DECIMAL(12, 2) NOT NULL,	-- ENDING CASH
	CF_AVAILABLE_CASH		DECIMAL(12, 2) NOT NULL,	-- 가용 현금
	FCF1					DECIMAL(12, 2) NOT NULL,	-- FCF1
	FCF2					DECIMAL(12, 2) NOT NULL,	-- FCF2
	FCF3					DECIMAL(12, 2) NOT NULL		-- FCF3

	PRIMARY KEY(PLAN_YEAR_CF_SEQ, SEQ)
);

-- 사업계획 > 월별투자인원계획
CREATE TABLE PLAN_MONTHLY_INVEST
(
	SEQ					INT NOT NULL IDENTITY(1, 1) PRIMARY KEY,

	MONTHLY_INVEST_YEAR	VARCHAR(4) NOT NULL,
	ORG_COMPANY_SEQ		INT NOT NULL,
	REGIST_STATUS		INT NOT NULL DEFAULT(0),

	USER_KEY			VARCHAR(11) NOT NULL,
	EMP_NO				VARCHAR(16) NULL,
	CREATE_DATE			DATETIME NULL
);

-- 사업계획 > 월별투자인원계획 - 부서별
CREATE TABLE PLAN_MONTHLY_INVEST_BUSINESS
(
	PLAN_MONTHLY_INVEST_SEQ	INT NOT NULL,
	SEQ						INT NOT NULL IDENTITY(1, 1),

	ORG_BUSINESS_SEQ		INT NOT NULL,
	YEARLY_YEAR				VARCHAR(4) NOT NULL,

	MONTHLY					VARCHAR(4) NULL,			

	INVESTMENT				DECIMAL(12, 2) NOT NULL,	-- 투자
	PERSONNEL				DECIMAL(12, 2) NOT NULL,	-- 인원
	DOMESTIC_PERSONNEL		DECIMAL(12, 2) NOT NULL,	-- 국내 인원
	OVERSEAS_PERSONNEL		DECIMAL(12, 2) NOT NULL,	-- 해외 인원
	PRIMARY KEY ( PLAN_YEAR_INVEST_SEQ, SEQ)
);

-- 사업계획 > 중기투자인원계획 - 요약
CREATE TABLE PLAN_MONTHLY_INVEST_SUMMARY
(
	PLAN_MONTHLY_INVEST_SEQ	INT NOT NULL,
	SEQ						INT NOT NULL IDENTITY(1, 1),

	YEARLY_YEAR				VARCHAR(4) NOT NULL,

	MONTHLY					VARCHAR(4) NULL,

	INVESTMENT				DECIMAL(12, 2) NOT NULL,	-- 투자
	PERSONNEL				DECIMAL(12, 2) NOT NULL,	-- 인원
	DOMESTIC_PERSONNEL		DECIMAL(12, 2) NOT NULL,	-- 국내 인원 : 값은 있어야 하는데 기존에 없던거라 null 허용
	OVERSEAS_PERSONNEL		DECIMAL(12, 2) NOT NULL,		-- 해외 인원 : 값은 있어야 하는데 기존에 없던거라 null 허용

	PRIMARY KEY(PLAN_YEAR_INVEST_SEQ, SEQ)
);

-- 사업계획 > 중기투자인원계획
CREATE TABLE PLAN_YEAR_INVEST
(
	SEQ					INT NOT NULL IDENTITY(1, 1) PRIMARY KEY,

	YEAR_INVEST_YEAR	VARCHAR(4) NOT NULL,
	ORG_COMPANY_SEQ		INT NOT NULL,
	REGIST_STATUS		INT NOT NULL DEFAULT(0),

	USER_KEY			VARCHAR(11) NOT NULL,
	EMP_NO				VARCHAR(16) NULL,
	CREATE_DATE			DATETIME NULL
);

-- 사업계획 > 중기투자인원계획 - 부서별
CREATE TABLE PLAN_YEAR_INVEST_BUSINESS
(
	PLAN_YEAR_INVEST_SEQ	INT NOT NULL,
	SEQ						INT NOT NULL IDENTITY(1, 1),

	ORG_BUSINESS_SEQ		INT NOT NULL,
	YEARLY_YEAR				VARCHAR(4) NOT NULL,

	--MONTHLY					VARCHAR(4) NULL,			-- 2018.09.14 실적과 비교하려는 월별 데이터가 있어야한다. 99는 합계 : 2018.10.05 월별 메뉴 따로 만듬

	INVESTMENT				DECIMAL(12, 2) NOT NULL,	-- 투자
	PERSONNEL				DECIMAL(12, 2) NOT NULL,	-- 인원
	DOMESTIC_PERSONNEL		DECIMAL(12, 2) NOT NULL,	-- 국내 인원
	OVERSEAS_PERSONNEL		DECIMAL(12, 2) NOT NULL,	-- 해외 인원
	PRIMARY KEY ( PLAN_YEAR_INVEST_SEQ, SEQ)
);

---- 사업계획 > 중기투자인원계획 - 투자인원합계 : 미사용
--CREATE TABLE PLAN_YEAR_INVEST_SUM
--(
--	PLAN_YEAR_INVEST_SEQ	INT NOT NULL,
--	SEQ						INT NOT NULL IDENTITY(1, 1),
	
--	YEARLY_YEAR				VARCHAR(4) NOT NULL,

--	MONTHLY					VARCHAR(4) NULL,			-- 2018.09.14 실적과 비교하려는 월별 데이터가 있어야한다. 99는 합계

--	INVESTMENT				DECIMAL(12, 2) NOT NULL,	-- 투자 (자본금포함)
--	PERSONNEL				DECIMAL(12, 2) NULL,		-- 인원

--	PRIMARY KEY ( PLAN_YEAR_INVEST_SEQ, SEQ)
--);

---- 사업계획 > 중기투자인원계획 - 인원구분 : 미사용
--CREATE TABLE PLAN_YEAR_INVEST_PRRSONNEL
--(
--	PLAN_YEAR_INVEST_SEQ	INT NOT NULL,
--	SEQ						INT NOT NULL IDENTITY(1, 1),
	
--	YEARLY_YEAR				VARCHAR(4) NOT NULL,

--	MONTHLY					VARCHAR(4) NULL,			-- 2018.09.14 실적과 비교하려는 월별 데이터가 있어야한다. 99는 합계
	
--	DOMESTIC_PERSONNEL		DECIMAL(12, 2) NOT NULL,	-- 국내 인원
--	OVERSEAS_PERSONNEL		DECIMAL(12, 2) NULL,		-- 해외 인원

--	PRIMARY KEY ( PLAN_YEAR_INVEST_SEQ, SEQ)
--);

-- 사업계획 > 중기투자인원계획 - 요약
CREATE TABLE PLAN_YEAR_INVEST_SUMMARY
(
	PLAN_YEAR_INVEST_SEQ	INT NOT NULL,
	SEQ						INT NOT NULL IDENTITY(1, 1),

	YEARLY_YEAR				VARCHAR(4) NOT NULL,

	--MONTHLY					VARCHAR(4) NULL,			-- 2018.09.14 실적과 비교하려는 월별 데이터가 있어야한다. 99는 합계 : 2018.10.05 월별 메뉴 따로 만듬

	INVESTMENT				DECIMAL(12, 2) NOT NULL,	-- 투자
	PERSONNEL				DECIMAL(12, 2) NOT NULL,	-- 인원
	DOMESTIC_PERSONNEL		DECIMAL(12, 2) NULL,	-- 국내 인원 : 값은 있어야 하는데 기존에 없던거라 null 허용
	OVERSEAS_PERSONNEL		DECIMAL(12, 2) NULL,		-- 해외 인원 : 값은 있어야 하는데 기존에 없던거라 null 허용

	PRIMARY KEY(PLAN_YEAR_INVEST_SEQ, SEQ)
);

-- 경영실적 > Cash Flow
CREATE TABLE PM_CASH_FLOW
(
	SEQ					INT NOT NULL IDENTITY(1, 1) PRIMARY KEY,

	CASH_FLOW_YEAR		VARCHAR(4) NOT NULL,
	MONTHLY				VARCHAR(4) NOT NULL,
	ORG_COMPANY_SEQ		INT NOT NULL,
	REGIST_STATUS		INT NOT NULL DEFAULT(0),

	USER_KEY			VARCHAR(11) NOT NULL,
	EMP_NO				VARCHAR(16) NULL,
	CREATE_DATE			DATETIME NULL
);

-- 코멘트 넣는 창 추가 2018.10.16
ALTER TABLE PM_CASH_FLOW ADD SALES_COMMENT NVARCHAR(MAX) NULL;
ALTER TABLE PM_CASH_FLOW ADD INVESTMENT_COMMENT NVARCHAR(MAX) NULL;
ALTER TABLE PM_CASH_FLOW ADD FINANCIAL_COMMENT NVARCHAR(MAX) NULL;
ALTER TABLE PM_CASH_FLOW ADD FCF_COMMENT NVARCHAR(MAX) NULL;
ALTER TABLE PM_CASH_FLOW ADD BE_CASH_COMMENT NVARCHAR(MAX) NULL;

-- 경영실적 > Cash Flow - 영업활동
CREATE TABLE PM_CASH_FLOW_SALES
(
	PM_CASH_FLOW_SEQ		INT NOT NULL,
	SEQ						INT NOT NULL IDENTITY(1, 1),

	CUMULATIVE				INT NOT NULL,				-- 당월 실적 10, 누계 실적, 20
	

	OPERATION_PROFIT		DECIMAL(12, 2) NOT NULL,	-- 영업 이익
	DEPRECIATION_COST		DECIMAL(12, 2) NOT NULL,	-- 감가비
	CORP_TAX				DECIMAL(12, 2) NOT NULL,	-- 법인세 비율
	EBITDA					DECIMAL(12, 2) NULL,		-- 세후 EBITDA
	AR						DECIMAL(12, 2) NOT NULL,	-- AR 변동
	INV						DECIMAL(12, 2) NOT NULL,	-- INV 변동
	AP						DECIMAL(12, 2) NOT NULL,	-- AP 변동
	WC_SUM					DECIMAL(12, 2) NULL,		-- WC 변동 소계
	ETC						DECIMAL(12, 2) NOT NULL,	-- 기타
	INTEREST_EXPENSE		DECIMAL(12, 2) NOT NULL,	-- 이자 비용
	INTEREST_INCOME			DECIMAL(12, 2) NOT NULL,	-- 이자 수익
	FINANCIAL_COST_SUM		DECIMAL(12, 2) NULL			-- 금융비용소계

	PRIMARY KEY(PM_CASH_FLOW_SEQ, SEQ)
);

-- 경영실적 > Cash Flow - 투자활동
CREATE TABLE PM_CASH_FLOW_INVESTMENT
(
	PM_CASH_FLOW_SEQ		INT NOT NULL,
	SEQ						INT NOT NULL IDENTITY(1, 1),

	CUMULATIVE				INT NOT NULL,				-- 당월 실적 10, 누계 실적, 20

	ASSETS					DECIMAL(12, 2) NOT NULL,	-- 유무형 자산
	EQUITY_INVESTMENT		DECIMAL(12, 2) NOT NULL,	-- 지분 투자
	ASSETS_SALE				DECIMAL(12, 2) NOT NULL,	-- 자산 매각
	NET_CAPEX_SUM			DECIMAL(12, 2) NULL,		-- NET CAPEX 소계

	PRIMARY KEY(PM_CASH_FLOW_SEQ, SEQ)
);

-- 경영실적 > Cash Flow - 재무활동
CREATE TABLE PM_CASH_FLOW_FINANCIAL
(
	PM_CASH_FLOW_SEQ		INT NOT NULL,
	SEQ						INT NOT NULL IDENTITY(1, 1),

	CUMULATIVE				INT NOT NULL,				-- 당월 실적 10, 누계 실적, 20

	ALLOCATION				DECIMAL(12, 2) NOT NULL,	-- 배당
	INCREASE				DECIMAL(12, 2) NOT NULL,	-- 증자
	BORROWING				DECIMAL(12, 2) NOT NULL,	-- 차입
	REPAYMENT				DECIMAL(12, 2) NOT NULL,	-- 상환
	ETC						DECIMAL(12, 2) NOT NULL,	-- 기타
	FINANCIAL_SUM			DECIMAL(12, 2) NULL,		-- 재무 활동 소계

	PRIMARY KEY(PM_CASH_FLOW_SEQ, SEQ)
);

-- 경영실적 > Cash Flow - FCF
CREATE TABLE PM_CASH_FLOW_FCF
(
	PM_CASH_FLOW_SEQ		INT NOT NULL,
	SEQ						INT NOT NULL IDENTITY(1, 1),

	CUMULATIVE				INT NOT NULL,				-- 당월 실적 10, 누계 실적, 20

	FCF1					DECIMAL(12, 2) NOT NULL,	-- FCF1
	FCF2					DECIMAL(12, 2) NOT NULL,	-- FCF2
	FCF3					DECIMAL(12, 2) NOT NULL,	-- FCF3
	CASH_SUM				DECIMAL(12, 2) NOT NULL,	-- 현금 흐름 합계
	FCF_SALES				DECIMAL(12, 2) NOT NULL		-- FCF / SALES

	PRIMARY KEY(PM_CASH_FLOW_SEQ, SEQ)
);

-- 경영실적 > Cash Flow - 기초/기말현금
CREATE TABLE PM_CASH_FLOW_BE_CASH
(
	PM_CASH_FLOW_SEQ		INT NOT NULL,
	SEQ						INT NOT NULL IDENTITY(1, 1),

	CUMULATIVE				INT NOT NULL,				-- 당월 실적 10, 누계 실적, 20

	BASIC_CASH				DECIMAL(12, 2) NOT NULL,	-- 기초 현금
	ENDING_CASH				DECIMAL(12, 2) NULL,		-- ENDING CASH
	CREDIT_LINE				DECIMAL(12, 2) NOT NULL,	-- CREDIT LINE
	AVAILABLE_CASH			DECIMAL(12, 2) NULL			-- 가용 현금

	PRIMARY KEY(PM_CASH_FLOW_SEQ, SEQ)
);

-- 경영실적 > Cash Flow - 해당월 Cash Flow 관리지표(누계)
-- (2018.09.14) 이 날짜에 추가하기로 한 재무활동 상세항목은 여기 안 넣고 다른데서 쓸때는 그냥 누적에서 가져오는 걸로 변경
CREATE TABLE PM_CASH_FLOW_CUMULATIVE
(
	PM_CASH_FLOW_SEQ		INT NOT NULL,
	SEQ						INT NOT NULL IDENTITY(1, 1),

	DIFF					INT NOT NULL,				-- 계획 : 10, 실적 : 20
	
	EBITDA					DECIMAL(12, 2) NOT NULL,	-- 세후 EBITDA
	WC_SUM					DECIMAL(12, 2) NOT NULL,	-- WC 변동 소계
	ETC						DECIMAL(12, 2) NOT NULL,	-- 기타
	NET_CAPEX_SUM			DECIMAL(12, 2) NOT NULL,	-- NET CAPEX 소계
	FINANCIAL_COST			DECIMAL(12, 2) NULL,	-- 순금융비용(2018.09.03)
	FCF2					DECIMAL(12, 2) NOT NULL,	-- FCF2

	F_ALLOCATION			DECIMAL(12, 2) NULL,	-- 배당(2018.09.14 . 재무 상세 정보가 있어야 해서 추가) : 2018.10.18 미사용 변경으로 Null 허용
	F_INCREASE				DECIMAL(12, 2) NULL,	-- 증자(2018.09.14 . 재무 상세 정보가 있어야 해서 추가) : 2018.10.18 미사용 변경으로 Null 허용
	F_BORROWING				DECIMAL(12, 2) NULL,	-- 차입(2018.09.14 . 재무 상세 정보가 있어야 해서 추가) : 2018.10.18 미사용 변경으로 Null 허용
	F_REPAYMENT				DECIMAL(12, 2) NULL,	-- 상환(2018.09.14 . 재무 상세 정보가 있어야 해서 추가) : 2018.10.18 미사용 변경으로 Null 허용
	F_ETC					DECIMAL(12, 2) NULL,	-- 기타(2018.09.14 . 재무 상세 정보가 있어야 해서 추가) : 2018.10.18 미사용 변경으로 Null 허용

	FINANCIAL_SUM			DECIMAL(12, 2) NOT NULL,	-- 재무 활동 소계
	CASH_SUM				DECIMAL(12, 2) NULL,	-- 현금흐름합계(2018.09.03)
	ENDING_CASH				DECIMAL(12, 2) NOT NULL,	-- ENDING CASH
	CREDIT_LINE				DECIMAL(12, 2) NOT NULL,	-- CREDIT LINE
	AVAILABLE_CASH			DECIMAL(12, 2) NOT NULL		-- 가용 현금

	PRIMARY KEY(PM_CASH_FLOW_SEQ, SEQ)
);
-- 경영실적 > 손익
CREATE TABLE PM_PAL
(
	SEQ							INT NOT NULL IDENTITY(1, 1) PRIMARY KEY,

	PAL_YEAR					VARCHAR(4) NOT NULL,
	MONTHLY						VARCHAR(4) NOT NULL,
	ORG_COMPANY_SEQ				INT NOT NULL,
	REGIST_STATUS		INT NOT NULL DEFAULT(0),

	-- 월별로 부채비율 코멘트를 넣는 것을 여기에서 관리하자.
	LIABILITIES_RATE_COMMENT	NVARCHAR(MAX) NULL,		-- 부채비율 실적입력

	USER_KEY					VARCHAR(11) NOT NULL,
	EMP_NO						VARCHAR(16) NULL,
	CREATE_DATE					DATETIME NULL
);

-- 경영실적 > 손익 - 부서별 데이터
CREATE TABLE PM_PAL_BUSINESS
(
	PM_PAL_SEQ				INT NOT NULL,
	SEQ						INT NOT NULL IDENTITY(1, 1),
		
	ORG_BUSINESS_SEQ		INT NULL,

	MONTHLY_TYPE			INT NOT NULL,				-- 해당월 : 10, 누계 : 20, 연간 : 30
	-- DIFF					INT NOT NULL,				-- 계획 : 10, 예상 : 15, 실적 : 20, 차이: 30, 계획대비 : 40, 전년대비 : 50

	SALES					DECIMAL(12, 2) NOT NULL,
	EBIT					DECIMAL(12, 2) NOT NULL,
	EBIT_RATE				DECIMAL(12, 2) NULL,
	PBT						DECIMAL(12, 2) NOT NULL,

	PRIMARY KEY ( PM_PAL_SEQ, SEQ)
);

-- 경영실적 > 손익 - 해당월 손익 요약
CREATE TABLE PM_PAL_SUMMARY
(
	PM_PAL_SEQ				INT NOT NULL,
	SEQ						INT NOT NULL IDENTITY(1, 1),

	MONTHLY_TYPE			INT NOT NULL,				-- 해당월 : 10, 누계 : 20, 연간 : 30
	--DIFF					INT NOT NULL,				-- 계획 : 10, 예상 : 15, 실적 : 20, 차이: 30, 계획대비 : 40, 전년대비 : 50

	SALES					DECIMAL(12, 2) NOT NULL,
	EBIT					DECIMAL(12, 2) NOT NULL,
	EBIT_RATE				DECIMAL(12, 2) NULL,
	PBT						DECIMAL(12, 2) NOT NULL,
	NET_PROFIT_TERM			DECIMAL(12, 2) NULL,		-- 당기순이익 *[2018-09-03] 데이터가 없어 NOT NULL -> NULL 로 변경
	LIABILITIES_RATE_COMMENT	NVARCHAR(MAX) NULL,		-- 부채비율 실적입력 *[2018-10-29] 컬럼추가

	PRIMARY KEY ( PM_PAL_SEQ, SEQ)
);

-- 경영실적 > 손익 - 순익분석
CREATE TABLE PM_PAL_ANALYSIS
(
	PM_PAL_SEQ				INT NOT NULL,
	SEQ						INT NOT NULL IDENTITY(1, 1),

	ANALYSIS				INT NOT NULL,				-- 매출 차이 : 10, 영업이익 차이 : 20, 경상이익 차이 : 30, 당기순이익 차이 : 40

	MONTHLY_CONTENT			NVARCHAR(256) NULL,
	MONTHLY_VALUE			DECIMAL(12, 2) NOT NULL,

	CUMULATIVE_CONTENT		NVARCHAR(256) NULL,
	CUMULATIVE_VALUE		DECIMAL(12, 2) NOT NULL,

	PRIMARY KEY ( PM_PAL_SEQ, SEQ)
);

-- 경영실적 > 손익 - 연간예상분석
CREATE TABLE PM_PAL_YEALY_ANALYSIS
(
	PM_PAL_SEQ				INT NOT NULL,
	SEQ						INT NOT NULL IDENTITY(1, 1),

	ANALYSIS				INT NOT NULL,				-- 매출 차이 : 10, 영업이익 차이 : 20, 경상이익 차이 : 30, 당기순이익 차이 : 40

	MONTHLY_CONTENT			NVARCHAR(256) NULL,
	MONTHLY_VALUE			DECIMAL(12, 2) NOT NULL,

	YEALY_CONTENT			NVARCHAR(256) NULL,
	YEALY_VALUE				DECIMAL(12, 2) NOT NULL,

	PRIMARY KEY ( PM_PAL_SEQ, SEQ)
);

-- 경영실적 > 분기별 손익
CREATE TABLE PM_QUARTER_PAL
(
	SEQ							INT NOT NULL IDENTITY(1, 1) PRIMARY KEY,

	QUARTER_PAL_YEAR			VARCHAR(4) NOT NULL,
	MONTHLY						VARCHAR(4) NOT NULL,
	ORG_COMPANY_SEQ				INT NOT NULL,
	REGIST_STATUS		INT NOT NULL DEFAULT(0),

	-- 월별로 부채비율 코멘트를 넣는 것을 여기에서 관리하자.
	-- LIABILITIES_RATE_COMMENT	NVARCHAR(MAX) NULL,		-- 부채비율 실적입력

	USER_KEY					VARCHAR(11) NOT NULL,
	EMP_NO						VARCHAR(16) NULL,
	CREATE_DATE					DATETIME NULL
);

-- 경영실적 > 분기별 손익 - 부서별 데이터
CREATE TABLE PM_QUARTER_PAL_BUSINESS
(
	PM_QUARTER_PAL_SEQ		INT NOT NULL,
	SEQ						INT NOT NULL IDENTITY(1, 1),
		
	ORG_BUSINESS_SEQ		INT NULL,
	BUSINESS_YEAR			VARCHAR(4) NULL,
	BUSINESS_QUARTER		INT NULL,

	SALES					DECIMAL(12, 2) NOT NULL,
	EBIT					DECIMAL(12, 2) NOT NULL,
	EBIT_RATE				DECIMAL(12, 2) NULL,
	PBT						DECIMAL(12, 2) NOT NULL,

	PRIMARY KEY ( PM_QUARTER_PAL_SEQ, SEQ)
);

-- 경영실적 > 분기별 손익 - 요약
CREATE TABLE PM_QUARTER_PAL_SUMMARY
(
	PM_QUARTER_PAL_SEQ		INT NOT NULL,
	SEQ						INT NOT NULL IDENTITY(1, 1),
		
	--ORG_BUSINESS_SEQ		INT NULL,
	BUSINESS_YEAR			VARCHAR(4) NULL,
	BUSINESS_QUARTER		INT NULL,

	SALES					DECIMAL(12, 2) NOT NULL,
	EBIT					DECIMAL(12, 2) NOT NULL,
	EBIT_RATE				DECIMAL(12, 2) NULL,
	PBT						DECIMAL(12, 2) NOT NULL,
	NET_PROFIT_TERM			DECIMAL(12, 2) NOT NULL,	-- 당기순이익

	PRIMARY KEY ( PM_QUARTER_PAL_SEQ, SEQ)
);

-- 경영실적 > BS
CREATE TABLE PM_BS
(
	SEQ					INT NOT NULL IDENTITY(1, 1) PRIMARY KEY,

	BS_YEAR				VARCHAR(4) NOT NULL,
	MONTHLY				VARCHAR(4) NOT NULL,
	ORG_COMPANY_SEQ		INT NOT NULL,
	REGIST_STATUS		INT NOT NULL DEFAULT(0),

	USER_KEY			VARCHAR(11) NOT NULL,
	EMP_NO				VARCHAR(16) NULL,
	CREATE_DATE			DATETIME NULL
);

-- 경영실적 > BS - B/SHEET
CREATE TABLE PM_BS_BSHEET
(
	PM_BS_SEQ				INT NOT NULL,
	SEQ						INT NOT NULL IDENTITY(1, 1),

	--DIFF					INT NOT NULL,				-- 계획 : 10, 예상 : 15, 실적 : 20, 차이: 30, 계획대비 : 40, 전년대비 : 50
	
	ASSETS					DECIMAL(12, 2) NOT NULL,	-- 자산
	CURRENT_ASSETS			DECIMAL(12, 2) NOT NULL,	-- 유동 자산
	LIABILITIES				DECIMAL(12, 2) NOT NULL,	-- 부채
	CURRENT_LIABILITIES		DECIMAL(12, 2) NOT NULL,	-- 유동 부채
	CAPITAL					DECIMAL(12, 2) NOT NULL,	-- 자본
	CASH					DECIMAL(12, 2) NOT NULL,	-- 현금
	LOAN					DECIMAL(12, 2) NOT NULL,	-- 차입금
	LIABILITIES_RATE		DECIMAL(12, 2) NULL,		-- 부채 비율
	CURRENT_RATE			DECIMAL(12, 2) NULL			-- 유동 비율

	PRIMARY KEY (PM_BS_SEQ, SEQ)
);

-- 경영실적 > BS - ROIC
CREATE TABLE PM_BS_ROIC
(
	PM_BS_SEQ				INT NOT NULL,
	SEQ						INT NOT NULL IDENTITY(1, 1),

	-- DIFF					INT NOT NULL,				-- 계획 : 10, 예상 : 15, 실적 : 20, 차이: 30, 계획대비 : 40, 전년대비 : 50
	
	AFTER_TAX_OPERATION_PROFIT	DECIMAL(12, 2) NOT NULL,	-- 세후 영업 이익
	PAIN_IN_CAPITAL				DECIMAL(12, 2) NOT NULL,	-- 투하 자본
	ROIC						DECIMAL(12, 2) NULL,		-- ROIC  *[2018-09-03] 데이터가 없어 NOT NULL -> NULL 로 변경

	PRIMARY KEY(PM_BS_SEQ, SEQ)
);

-- 경영실적 > BS - W/CAPITAL
CREATE TABLE PM_BS_W_CAPITAL
(
	PM_BS_SEQ		INT NOT NULL,
	SEQ						INT NOT NULL IDENTITY(1, 1),

	-- DIFF					INT NOT NULL,				-- 계획 : 10, 예상 : 15, 실적 : 20, 차이: 30, 계획대비 : 40, 전년대비 : 50

	ANNUAL_SALES			DECIMAL(12, 2) NOT NULL,	-- 연간 매출액
	ANNUAL_SALES_COST		DECIMAL(12, 2) NOT NULL,	-- 연간 매출 원가
	INVENTORY_COST			DECIMAL(12, 2) NULL, -- 투자원가(2018.11.06 추가. INVENTORY와 계산하여 INVENTORY_TO_DAYS를 만든다.

	PRIMARY KEY(PM_BS_SEQ, SEQ)
);

-- 경영실적 > BS - W/CAPITAL 값으로 연산
CREATE TABLE PM_BS_W_CAPITAL_REG
(
	PM_BS_SEQ		INT NOT NULL,
	SEQ						INT NOT NULL IDENTITY(1, 1),

	-- DIFF					INT NOT NULL,				-- 계획 : 10, 예상 : 15, 실적 : 20, 차이: 30, 계획대비 : 40, 전년대비 : 50

	AR						DECIMAL(12, 2) NOT NULL,
	AR_TO_DAYS				DECIMAL(12, 2) NULL,		--*[2018-09-03] 데이터가 없어 NOT NULL -> NULL 로 변경
	AP						DECIMAL(12, 2) NOT NULL,
	AP_TO_DAYS				DECIMAL(12, 2) NULL,		--*[2018-09-03] 데이터가 없어 NOT NULL -> NULL 로 변경
	INVENTORY				DECIMAL(12, 2) NOT NULL,
	INVENTORY_TO_DAYS		DECIMAL(12, 2) NULL,	--*[2018-09-03] 데이터가 없어 NOT NULL -> NULL 로 변경

	PRIMARY KEY(PM_BS_SEQ, SEQ)
);

-- 경영실적 > BS - 요약
CREATE TABLE PM_BS_SUMMARY
(
	PM_BS_SEQ		INT NOT NULL,
	SEQ						INT NOT NULL IDENTITY(1, 1),

	-- DIFF					INT NOT NULL,				-- 계획 : 10, 예상 : 15, 실적 : 20, 차이: 30, 계획대비 : 40, 전년대비 : 50

	ASSETS					DECIMAL(12, 2) NOT NULL,		-- 자산
	CURRENT_ASSETS			DECIMAL(12, 2) NULL,	-- 유동 자산(2018.09.14)
	LIABILITIES				DECIMAL(12, 2) NOT NULL,		-- 부채
	CURRENT_LIABILITIES		DECIMAL(12, 2) NULL,	-- 유동 부채(2018.09.14)
	CAPITAL					DECIMAL(12, 2) NOT NULL,		-- 자본
	CASH					DECIMAL(12, 2) NOT NULL,		-- 현금
	LOAN					DECIMAL(12, 2) NOT NULL,		-- 차입금
	LIABILITIES_RATE		DECIMAL(12, 2) NULL,		-- 부채 비율
	
	AFTER_TAX_OPERATION_PROFIT	DECIMAL(12, 2) NOT NULL,	-- 세후 영업 이익
	PAIN_IN_CAPITAL				DECIMAL(12, 2) NOT NULL,	-- 투하 자본
	ROIC						DECIMAL(12, 2) NULL,	-- ROIC

	AR						DECIMAL(12, 2) NOT NULL,
	AR_TO_DAYS				DECIMAL(12, 2) NOT NULL,
	AP						DECIMAL(12, 2) NOT NULL,
	AP_TO_DAYS				DECIMAL(12, 2) NOT NULL,
	INVENTORY				DECIMAL(12, 2) NOT NULL,
	INVENTORY_TO_DAYS		DECIMAL(12, 2) NOT NULL

	PRIMARY KEY(PM_BS_SEQ, SEQ)
);

/*
	실적BS 예외처리 시작
*/

-- 경영실적 > BS
CREATE TABLE PM_BS_EX
(
	SEQ					INT NOT NULL IDENTITY(1, 1) PRIMARY KEY,

	BS_YEAR				VARCHAR(4) NOT NULL,
	MONTHLY				VARCHAR(4) NOT NULL,
	ORG_COMPANY_SEQ		INT NOT NULL,
	REGIST_STATUS		INT NOT NULL DEFAULT(0),

	USER_KEY			VARCHAR(11) NOT NULL,
	EMP_NO				VARCHAR(16) NULL,
	CREATE_DATE			DATETIME NULL
);

-- 경영실적 > BS - B/SHEET
CREATE TABLE PM_BS_BSHEET_EX
(
	PM_BS_SEQ				INT NOT NULL,
	SEQ						INT NOT NULL IDENTITY(1, 1),

	--DIFF					INT NOT NULL,				-- 계획 : 10, 예상 : 15, 실적 : 20, 차이: 30, 계획대비 : 40, 전년대비 : 50
	
	ASSETS					DECIMAL(12, 2) NOT NULL,	-- 자산
	CURRENT_ASSETS			DECIMAL(12, 2) NOT NULL,	-- 유동 자산
	LIABILITIES				DECIMAL(12, 2) NOT NULL,	-- 부채
	CURRENT_LIABILITIES		DECIMAL(12, 2) NOT NULL,	-- 유동 부채
	CAPITAL					DECIMAL(12, 2) NOT NULL,	-- 자본
	CASH					DECIMAL(12, 2) NOT NULL,	-- 현금
	LOAN					DECIMAL(12, 2) NOT NULL,	-- 차입금
	LIABILITIES_RATE		DECIMAL(12, 2) NULL,		-- 부채 비율
	CURRENT_RATE			DECIMAL(12, 2) NULL			-- 유동 비율

	PRIMARY KEY (PM_BS_SEQ, SEQ)
);

-- 경영실적 > BS - ROIC
CREATE TABLE PM_BS_ROIC_EX
(
	PM_BS_SEQ				INT NOT NULL,
	SEQ						INT NOT NULL IDENTITY(1, 1),

	-- DIFF					INT NOT NULL,				-- 계획 : 10, 예상 : 15, 실적 : 20, 차이: 30, 계획대비 : 40, 전년대비 : 50
	
	AFTER_TAX_OPERATION_PROFIT	DECIMAL(12, 2) NOT NULL,	-- 세후 영업 이익
	PAIN_IN_CAPITAL				DECIMAL(12, 2) NOT NULL,	-- 투하 자본
	ROIC						DECIMAL(12, 2) NULL,		-- ROIC  *[2018-09-03] 데이터가 없어 NOT NULL -> NULL 로 변경

	PRIMARY KEY(PM_BS_SEQ, SEQ)
);

-- 경영실적 > BS - W/CAPITAL
CREATE TABLE PM_BS_W_CAPITAL_EX
(
	PM_BS_SEQ		INT NOT NULL,
	SEQ						INT NOT NULL IDENTITY(1, 1),

	-- DIFF					INT NOT NULL,				-- 계획 : 10, 예상 : 15, 실적 : 20, 차이: 30, 계획대비 : 40, 전년대비 : 50

	ANNUAL_SALES			DECIMAL(12, 2) NOT NULL,	-- 연간 매출액
	ANNUAL_SALES_COST		DECIMAL(12, 2) NOT NULL,	-- 연간 매출 원가
	INVENTORY_COST			DECIMAL(12, 2) NULL, -- 투자원가(2018.11.06 추가. INVENTORY와 계산하여 INVENTORY_TO_DAYS를 만든다.

	PRIMARY KEY(PM_BS_SEQ, SEQ)
);

-- 경영실적 > BS - W/CAPITAL 값으로 연산
CREATE TABLE PM_BS_W_CAPITAL_REG_EX
(
	PM_BS_SEQ		INT NOT NULL,
	SEQ						INT NOT NULL IDENTITY(1, 1),

	-- DIFF					INT NOT NULL,				-- 계획 : 10, 예상 : 15, 실적 : 20, 차이: 30, 계획대비 : 40, 전년대비 : 50

	AR						DECIMAL(12, 2) NOT NULL,
	AR_TO_DAYS				DECIMAL(12, 2) NULL,		--*[2018-09-03] 데이터가 없어 NOT NULL -> NULL 로 변경
	AP						DECIMAL(12, 2) NOT NULL,
	AP_TO_DAYS				DECIMAL(12, 2) NULL,		--*[2018-09-03] 데이터가 없어 NOT NULL -> NULL 로 변경
	INVENTORY				DECIMAL(12, 2) NOT NULL,
	INVENTORY_TO_DAYS		DECIMAL(12, 2) NULL,	--*[2018-09-03] 데이터가 없어 NOT NULL -> NULL 로 변경

	PRIMARY KEY(PM_BS_SEQ, SEQ)
);

-- 경영실적 > BS - 요약
CREATE TABLE PM_BS_SUMMARY_EX
(
	PM_BS_SEQ		INT NOT NULL,
	SEQ						INT NOT NULL IDENTITY(1, 1),

	-- DIFF					INT NOT NULL,				-- 계획 : 10, 예상 : 15, 실적 : 20, 차이: 30, 계획대비 : 40, 전년대비 : 50

	ASSETS					DECIMAL(12, 2) NOT NULL,		-- 자산
	CURRENT_ASSETS			DECIMAL(12, 2) NULL,	-- 유동 자산(2018.09.14)
	LIABILITIES				DECIMAL(12, 2) NOT NULL,		-- 부채
	CURRENT_LIABILITIES		DECIMAL(12, 2) NULL,	-- 유동 부채(2018.09.14)
	CAPITAL					DECIMAL(12, 2) NOT NULL,		-- 자본
	CASH					DECIMAL(12, 2) NOT NULL,		-- 현금
	LOAN					DECIMAL(12, 2) NOT NULL,		-- 차입금
	LIABILITIES_RATE		DECIMAL(12, 2) NULL,		-- 부채 비율
	
	AFTER_TAX_OPERATION_PROFIT	DECIMAL(12, 2) NOT NULL,	-- 세후 영업 이익
	PAIN_IN_CAPITAL				DECIMAL(12, 2) NOT NULL,	-- 투하 자본
	ROIC						DECIMAL(12, 2) NULL,	-- ROIC

	AR						DECIMAL(12, 2) NOT NULL,
	AR_TO_DAYS				DECIMAL(12, 2) NOT NULL,
	AP						DECIMAL(12, 2) NOT NULL,
	AP_TO_DAYS				DECIMAL(12, 2) NOT NULL,
	INVENTORY				DECIMAL(12, 2) NOT NULL,
	INVENTORY_TO_DAYS		DECIMAL(12, 2) NOT NULL

	PRIMARY KEY(PM_BS_SEQ, SEQ)
);
/*
	실적BS 에외처리 끝
*/

-- 경영실적 > 투자인원계획
CREATE TABLE PM_INVEST
(
	SEQ					INT NOT NULL IDENTITY(1, 1) PRIMARY KEY,

	INVEST_YEAR			VARCHAR(4) NOT NULL,
	MONTHLY				VARCHAR(4) NOT NULL,
	ORG_COMPANY_SEQ		INT NOT NULL,
	REGIST_STATUS		INT NOT NULL DEFAULT(0),

	USER_KEY			VARCHAR(11) NOT NULL,
	EMP_NO				VARCHAR(16) NULL,
	CREATE_DATE			DATETIME NULL
);

-- 경영실적 > 투자인원계획 - 부서별
CREATE TABLE PM_INVEST_BUSINESS
(
	PM_INVEST_SEQ	INT NOT NULL,
	SEQ						INT NOT NULL IDENTITY(1, 1),

	ORG_BUSINESS_SEQ		INT NOT NULL,
	MONTHLY_TYPE			INT NOT NULL,				-- 해당월 : 10, 누계 : 20, 연간 : 30
	--DIFF					INT NOT NULL,				-- 계획 : 10, 예상 : 15, 실적 : 20, 차이: 30, 계획대비 : 40, 전년대비 : 50

	INVESTMENT				DECIMAL(12, 2) NOT NULL,	-- 투자
	PERSONNEL				DECIMAL(12, 2) NOT NULL,	-- 인원
	DOMESTIC_PERSONNEL		DECIMAL(12, 2) NULL,	-- 국내 인원(2018.09.14 필수인지는 확인해야한다.)
	OVERSEAS_PERSONNEL		DECIMAL(12, 2) NULL,	-- 해외 인원(2018.09.14 필수인지는 확인해야한다.)
	PRIMARY KEY ( PM_INVEST_SEQ, SEQ)
);

-- 경영실적 > 투자인원계획 - 투자인원합계
CREATE TABLE PM_INVEST_SUM
(
	PM_INVEST_SEQ	INT NOT NULL,
	SEQ						INT NOT NULL IDENTITY(1, 1),
	
	MONTHLY_TYPE			INT NOT NULL,				-- 해당월 : 10, 누계 : 20, 연간 : 30
	--DIFF					INT NOT NULL,				-- 계획 : 10, 예상 : 15, 실적 : 20, 차이: 30, 계획대비 : 40, 전년대비 : 50

	INVESTMENT				DECIMAL(12, 2) NOT NULL,	-- 투자 (자본금포함)
	PERSONNEL				DECIMAL(12, 2) NOT NULL,	-- 인원
	DOMESTIC_PERSONNEL		DECIMAL(12, 2) NULL,	-- 국내 인원(2018.09.14 필수인지는 확인해야한다.)
	OVERSEAS_PERSONNEL		DECIMAL(12, 2) NULL,	-- 해외 인원(2018.09.14 필수인지는 확인해야한다.)

	PRIMARY KEY ( PM_INVEST_SEQ, SEQ)
);

-- 엑셀 파일 업로드 이력 관리(개발 미 반영)
CREATE TABLE EXCEL_FILE_UPLOAD_LIST
(
	SEQ						INT NOT NULL IDENTITY(1, 1) PRIMARY KEY,

	USER_KEY				VARCHAR(11) NOT NULL,
	EMP_NO					VARCHAR(16) NULL,
	CREATE_DATE				DATETIME NULL,

	ATTACH_TABLE_NAME		NVARCHAR(64) NOT NULL,
	ATTACH_TABLE_SEQ		INT NOT NULL,
	FILE_INPUT_NAME			NVARCHAR(32) NULL,
	FILE_PATH				NVARCHAR(256) NOT NULL,
	FILE_ORG_NAME			NVARCHAR(256) NOT NULL,
	FILE_STORED_NAME		NVARCHAR(256) NOT NULL,
	FILE_SIZE				NVARCHAR(16) NOT NULL,
	DESCRIPT				NVARCHAR(256) NULL,
);

CREATE TABLE COMMENT_LIST
(
	SEQ						INT NOT NULL IDENTITY(1, 1) PRIMARY KEY,
	USER_KEY				VARCHAR(11) NOT NULL,
	EMP_NO					VARCHAR(16) NULL,
	CREATE_DATE				DATETIME NULL,

	ATTACH_TABLE_NAME		NVARCHAR(64) NOT NULL,
	ATTACH_TABLE_SEQ		INT NOT NULL,
	COMMENT_YEAR			NVARCHAR(4) NULL,
	COMMENT_MONTH			NVARCHAR(4) NULL,
	COMMENT					NVARCHAR(MAX) NULL,
	ADMIN_WRITE				NVARCHAR(1) NULL
);

ALTER TABLE COMMENT_LIST ADD ADMIN_WRITE NVARCHAR(1) NULL DEFAULT('N'); -- 관리자에서 등록된 글인지 체크 하여야 관리자에서 보여줄수가 있아.(2018.11.13)

/*
	이미지 및 첨부파일 관리 
*/
CREATE TABLE FILE_INFO
(
	SEQ 				INT NOT NULL IDENTITY(1,1) PRIMARY KEY,
	REG_DATE			DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
	ATTACH_TABLE_NAME	NVARCHAR(32) NOT NULL,
	ATTACH_TABLE_SEQ 	INT NOT NULL,
	FILE_INPUT_NAME		NVARCHAR(32) DEFAULT '',
	FILE_PATH 			NVARCHAR(256) NOT NULL,
	FILE_ORG_NAME 		NVARCHAR(256) NOT NULL,				
	FILE_STORED_NAME 	NVARCHAR(256) NOT NULL,	
	FILE_SIZE			NVARCHAR(16) NOT NULL,
);

/*
	공지사항 관리 
*/
CREATE TABLE NOTICE
(
	SEQ						INT NOT NULL IDENTITY(1, 1) PRIMARY KEY,
	USER_KEY				VARCHAR(11) NOT NULL,
	EMP_NO					VARCHAR(16) NULL,

	REG_DATE				DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
	UPDATE_DATE				DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
	
	TITLE					NVARCHAR(256) NOT NULL,
	INPUT_REG_DATE			DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
	CONTENTS				TEXT NOT NULL,
	IS_USE					NVARCHAR(1) NOT NULL DEFAULT 'N',
	VIEW_CNT				INT NOT NULL DEFAULT 1,
);	

/*
	자료실 관리
*/

CREATE TABLE REFERENCE
(
	SEQ						INT NOT NULL IDENTITY(1, 1) PRIMARY KEY,
	USER_KEY				VARCHAR(11) NOT NULL,
	EMP_NO					VARCHAR(16) NULL,

	REG_DATE				DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
	UPDATE_DATE				DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,

	TITLE					NVARCHAR(256) NOT NULL,
	INPUT_REG_DATE			DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
	CONTENTS				TEXT NOT NULL,
	IS_USE					NVARCHAR(1) NOT NULL DEFAULT 'N',
	VIEW_CNT				INT NOT NULL DEFAULT 1,
);	


CREATE TABLE MAIL_SEND_LIST
(
	SEND_DATE				datetime NOT NULL,
	[FM_ADDRESS] [nvarchar](200) NOT NULL,
	[TO_ADDRESS] [nvarchar](200) NOT NULL,
	[SUBJECT] [nvarchar](500) NOT NULL,
	[BODY] [nvarchar](max) NOT NULL,
	[IS_SEND] [nvarchar](1) NOT NULL,
	[FAIL_REASON] [nvarchar](max) NULL
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]

CREATE TABLE [dbo].[MOBILE_DEVICE](
	[USER_IDX] [varchar](50) NOT NULL,						-- 사용자 고유값 USER_IDX
	[DEVICE_TOKEN] [varchar](300) NOT NULL,					-- FCM 토큰
	[DEVICE_TYPE] [varchar](10) NOT NULL,					-- A-안드로이드, i-iOS
	[CREATED_AT] [datetime] NOT NULL,
 CONSTRAINT [PK_MOBILE_DEVICE] PRIMARY KEY CLUSTERED 
(
	[DEVICE_TOKEN] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
